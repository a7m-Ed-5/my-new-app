<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ูุตุงุฑููู</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- ๐ฌ Splash Screen (CSS auto-hide) -->
<div id="splashScreen" class="splash">
  <div class="splash-box">
    <div class="splash-logo">๐ฐ</div>
    <h1>ูุตุงุฑููู</h1>
    <p>ุฅุฏุงุฑุฉ ุงูุฏุฎู ูุงููุตุงุฑูู ุจุณูููุฉ</p>
    <div class="loader"></div>
  </div>
</div>

<!-- ๐ Lock Screen -->
<div id="lockScreen" class="lock-screen hidden">
  <div class="lock-card">

    <!-- PIN -->
    <div id="pinBox">
      <h3>๐ ุฃุฏุฎู ุงูุฑูู ุงูุณุฑู</h3>
      <input type="password" id="pinInput" class="input">
      <button class="btn" onclick="checkPin()">ุฏุฎูู</button>
    </div>

    <!-- Pattern -->
    <div id="patternBox" class="hidden">
      <h3>๐ข ุงุฑุณู ุงูููุท</h3>
      <div class="pattern-grid">
        <div data-p="1"></div><div data-p="2"></div><div data-p="3"></div>
        <div data-p="4"></div><div data-p="5"></div><div data-p="6"></div>
        <div data-p="7"></div><div data-p="8"></div><div data-p="9"></div>
      </div>
      <button class="btn" onclick="checkPattern()">ุฏุฎูู</button>
    </div>

    <p id="lockMsg"></p>
  </div>
</div>

<header class="app-header">๐ ูุตุงุฑููู</header>

<nav class="tabs">
  <button class="tab active" data-view="dashboard">ุงูุฑุฆูุณูุฉ</button>
  <button class="tab" data-view="income">ุงูุฏุฎู</button>
  <button class="tab" data-view="expenses">ุงููุตุงุฑูู</button>
  <button class="tab" data-view="settings">ุงูุฅุนุฏุงุฏุงุช</button>
</nav>

<main class="container">

<!-- Dashboard -->
<section id="view-dashboard" class="view active">
  <div class="grid-3">
    <div class="stat">ุงูุฏุฎู<br><b id="sumIncome">0</b></div>
    <div class="stat">ุงููุตุงุฑูู<br><b id="sumExpenses">0</b></div>
    <div class="stat">ุงููุชุจูู<br><b id="sumBalance">0</b></div>
  </div>
</section>

<!-- Income -->
<section id="view-income" class="view">
  <input id="incomeAmount" class="input" type="number" placeholder="ุงููุจูุบ">
  <input id="incomeDate" class="input" type="date">
  <button class="btn" onclick="addIncome()">ุฅุถุงูุฉ ุฏุฎู</button>
  <div id="incomeList"></div>
</section>

<!-- Expenses -->
<section id="view-expenses" class="view">
  <input id="expenseName" class="input" placeholder="ุงุณู ุงููุตุฑูู">
  <input id="expenseAmount" class="input" type="number" placeholder="ุงููุจูุบ">
  <button class="btn" onclick="addExpense()">ุฅุถุงูุฉ ูุตุฑูู</button>
  <div id="expenseList"></div>
</section>

<!-- Settings -->
<section id="view-settings" class="view">
  <h3>๐ ููุน ุงูููู</h3>
  <select id="lockType" class="input">
    <option value="pin">ุฑูู ุณุฑู</option>
    <option value="pattern">ููุท</option>
    <option value="none">ุจุฏูู ููู</option>
  </select>
  <button class="btn" onclick="saveLockType()">ุญูุธ</button>

  <h3>โ๏ธ ุชุบููุฑ PIN</h3>
  <input id="oldPin" class="input" placeholder="ุงูุญุงูู">
  <input id="newPin" class="input" placeholder="ุงูุฌุฏูุฏ">
  <input id="confirmNewPin" class="input" placeholder="ุชุฃููุฏ ุงูุฌุฏูุฏ">
  <button class="btn" onclick="changePin()">ุชุบููุฑ</button>
</section>

</main>

<script src="app.js"></script>
</body>
</html>r="ุงูุฌุฏูุฏ">
  <input id="confirmNewPin" class="input" placeholder="ุชุฃููุฏ ุงูุฌุฏูุฏ">
  <button class="btn" onclick="changePin()">ุชุบููุฑ PIN</button>

  <h3>๐ค๐ฅ Excel</h3>
  <button class="btn" onclick="exportExcel()">ุชุตุฏูุฑ</button>
  <input type="file" accept=".csv" onchange="importExcel(event)">
</section>

</main>

<script src="app.js"></script>
</body>
</html>        <input id="incomeDate" class="input" type="date" required />
          </div>
          <div class="row">
            <input id="incomeSource" class="input" type="text" placeholder="ุงููุตุฏุฑ (ุงุฎุชูุงุฑู)" />
            <input id="incomeNotes" class="input" type="text" placeholder="ููุงุญุธุงุช (ุงุฎุชูุงุฑู)" />
          </div>
          <button class="btn" type="submit">ุญูุธ ุงูุฏุฎู</button>
        </form>
      </div>

      <div class="card">
        <div class="card-title">ูุงุฆูุฉ ุงูุฏุฎู</div>
        <div class="row">
          <input id="incomeSearch" class="input" type="search" placeholder="ุจุญุซ ุจุงููุตุฏุฑ/ุงูููุงุญุธุงุช..." />
          <input id="incomeFrom" class="input" type="date" />
          <input id="incomeTo" class="input" type="date" />
          <button id="incomeFilterBtn" class="btn btn-ghost" type="button">ุชุตููุฉ</button>
        </div>

        <div id="incomeList" class="list"></div>
        <div id="incomeEmpty" class="empty hidden">ูุง ุชูุฌุฏ ุณุฌูุงุช ุฏุฎู.</div>
      </div>
    </section>

    <!-- EXPENSES -->
    <section id="view-expenses" class="view" aria-label="ุงููุตุงุฑูู">
      <div class="card">
        <div class="card-title">ุฅุถุงูุฉ ูุตุฑูู</div>
        <form id="expenseForm" class="form">
          <div class="row">
            <input id="expenseName" class="input" type="text" placeholder="ุงุณู ุงููุตุฑูู/ุงูููุชุฌ *" required />
            <input id="expenseAmount" class="input" type="number" step="0.01" min="0" placeholder="ุงููุจูุบ *" required />
          </div>
          <div class="row">
            <input id="expenseDate" class="input" type="date" required />
            <input id="expenseCategory" class="input" type="text" placeholder="ุงูุชุตููู (ุงุฎุชูุงุฑู)" />
          </div>
          <div class="row">
            <select id="expensePay" class="input">
              <option value="">ุทุฑููุฉ ุงูุฏูุน (ุงุฎุชูุงุฑู)</option>
              <option value="cash">ูุงุด</option>
              <option value="card">ุจุทุงูุฉ</option>
              <option value="wallet">ูุญูุธุฉ</option>
            </select>
            <input id="expenseNotes" class="input" type="text" placeholder="ููุงุญุธุงุช (ุงุฎุชูุงุฑู)" />
          </div>
          <button class="btn" type="submit">ุญูุธ ุงููุตุฑูู</button>
        </form>
      </div>

      <div class="card">
        <div class="card-title">ูุงุฆูุฉ ุงููุตุงุฑูู</div>
        <div class="row">
          <input id="expenseSearch" class="input" type="search" placeholder="ุจุญุซ ุจุงูุงุณู..." />
          <input id="expenseFrom" class="input" type="date" />
          <input id="expenseTo" class="input" type="date" />
        </div>
        <div class="row">
          <input id="expenseCategoryFilter" class="input" type="text" placeholder="ุชุตููุฉ ุจุงูุชุตููู..." />
          <select id="expensePayFilter" class="input">
            <option value="">ูู ุทุฑู ุงูุฏูุน</option>
            <option value="cash">ูุงุด</option>
            <option value="card">ุจุทุงูุฉ</option>
            <option value="wallet">ูุญูุธุฉ</option>
          </select>
          <button id="expenseFilterBtn" class="btn btn-ghost" type="button">ุชุตููุฉ</button>
        </div>

        <div id="expenseList" class="list"></div>
        <div id="expenseEmpty" class="empty hidden">ูุง ุชูุฌุฏ ูุตุงุฑูู.</div>
      </div>
    </section>

    <!-- REPORTS -->
    <section id="view-reports" class="view" aria-label="ุงูุชูุงุฑูุฑ">
      <div class="card">
        <div class="card-title">ููุฎุต ุดูุฑู</div>
        <div class="row">
          <input id="reportMonth" class="input" type="month" />
          <button id="runReportsBtn" class="btn" type="button">ุนุฑุถ ุงูุชูุฑูุฑ</button>
        </div>

        <div class="grid-3">
          <div class="stat">
            <div class="stat-label">ุฏุฎู ุงูุดูุฑ</div>
            <div id="repIncome" class="stat-value">โ</div>
          </div>
          <div class="stat">
            <div class="stat-label">ูุตุงุฑูู ุงูุดูุฑ</div>
            <div id="repExpenses" class="stat-value">โ</div>
          </div>
          <div class="stat">
            <div class="stat-label">ุตุงูู ุงูุดูุฑ</div>
            <div id="repNet" class="stat-value">โ</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">ุงููุตุงุฑูู ุญุณุจ ุงูุชุตููู</div>
        <div id="catList" class="list"></div>
        <div id="catEmpty" class="empty hidden">ูุง ุชูุฌุฏ ุจูุงูุงุช.</div>
      </div>

      <div class="card">
        <div class="card-title">ุฃุนูู 10 ูุตุงุฑูู</div>
        <div id="top10List" class="list"></div>
        <div id="top10Empty" class="empty hidden">ูุง ุชูุฌุฏ ุจูุงูุงุช.</div>
      </div>

      <div class="card">
        <div class="card-title">ุฑุณู ุจูุงูู ุจุณูุท (ุงุฎุชูุงุฑู)</div>
        <canvas id="chartCanvas" width="900" height="380" class="chart"></canvas>
        <div class="hint">ุงูุฑุณู ูุนุฑุถ ุฃุนูู ุงูุชุตูููุงุช (ุญุณุจ ุงููุจูุบ).</div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="view-settings" class="view" aria-label="ุงูุฅุนุฏุงุฏุงุช">
      <div class="card">
        <div class="card-title">ุงูุนููุฉ</div>
        <div class="row">
          <select id="currencySelect" class="input">
            <option value="EGP">EGP (ุงูุชุฑุงุถู)</option>
            <option value="USD">USD</option>
            <option value="SAR">SAR</option>
            <option value="AED">AED</option>
            <option value="EUR">EUR</option>
          </select>
          <button id="saveCurrencyBtn" class="btn" type="button">ุญูุธ</button>
        </div>
        <div class="hint">ูุชู ุญูุธ ุงูุนููุฉ ูุญูููุง ุนูู ุงูุฌูุงุฒ.</div>
      </div>

      <div class="card">
        <div class="card-title">ุงูููุฒุงููุฉ ุงูุดูุฑูุฉ</div>
        <div class="row">
          <input id="monthlyBudget" class="input" type="number" step="0.01" min="0" placeholder="ุถุน ุญุฏ ููุฒุงููุฉ ููุดูุฑ (ุงุฎุชูุงุฑู)" />
          <button id="saveBudgetBtn" class="btn" type="button">ุญูุธ</button>
        </div>
        <div class="hint">ุชุญุฐูุฑ ุนูุฏ 80%ุ ูุชูุจูู ุนูุฏ 100%.</div>
      </div>

      <div class="card danger">
        <div class="card-title">ุญุฐู ูู ุงูุจูุงูุงุช</div>
        <p class="danger-text">ูุฐุง ุณูุญุฐู ุงูุฏุฎู ูุงููุตุงุฑูู ูุงูุฅุนุฏุงุฏุงุช ูู ุงูุฌูุงุฒ ููุงุฆููุง.</p>
        <button id="clearAllBtn" class="btn btn-danger" type="button">ูุณุญ ูู ุงูุจูุงูุงุช</button>
      </div>

      <div class="card">
        <div class="card-title">ุญุงูุฉ ุงูุชุทุจูู</div>
        <div class="status-row">
          <span>ุงูุงุชุตุงู:</span>
          <strong id="netStatus">โ</strong>
        </div>
        <div class="status-row">
          <span>ูุถุน ุฏูู ุฅูุชุฑูุช ุจุนุฏ ุฃูู ุชุญููู:</span>
          <strong>ูุฏุนูู</strong>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL (Edit/Delete confirm + forms) -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-label="ูุงูุฐุฉ">
    <div class="modal-card">
      <div class="modal-head">
        <div id="modalTitle" class="modal-title">โ</div>
        <button id="modalClose" class="icon-btn" type="button" aria-label="ุฅุบูุงู">โ</button>
      </div>
      <div id="modalBody" class="modal-body"></div>
      <div id="modalActions" class="modal-actions"></div>
    </div>
  </div>

  <script src="./db.js"></script>
  <script src="./app.js"></script>
  <script src="./sw-register.js"></script>
</body>
</html>
